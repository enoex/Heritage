// Generated by CoffeeScript 1.4.0
(function() {

  define(['entity', 'assemblages/assemblages'], function(Entity, Assemblages) {
    var Zombie;
    Zombie = (function() {

      Zombie.ageSpeed = 0.05;

      function Zombie(entities) {
        this.entities = entities;
        return this;
      }

      Zombie.prototype.updateZombie = function(entity) {
        var health, physics, zombie;
        zombie = entity.components.zombie;
        physics = entity.components.physics;
        health = entity.components.health;
        zombie.age += Zombie.ageSpeed;
        physics.maxSpeed = zombie.getMaxSpeed();
        zombie.resources = zombie.calculateResources();
        health.health = zombie.calculateHealth(health.health);
        zombie.isDead = zombie.getIsDead(health.health);
        if (zombie.isDead) {
          this.entities.remove(entity);
        }
        return true;
      };

      Zombie.prototype.tick = function(delta) {
        var entity, id, _ref;
        _ref = this.entities.entitiesIndex['zombie'];
        for (id in _ref) {
          entity = _ref[id];
          this.updateZombie(entity);
        }
        return this;
      };

      return Zombie;

    })();
    return Zombie;
  });

}).call(this);
