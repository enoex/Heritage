// Generated by CoffeeScript 1.4.0
(function() {

  define(['components/world'], function(WorldComponent) {
    var World;
    World = (function() {

      function World(entities) {
        this.entities = entities;
        return this;
      }

      World.prototype.tick = function(delta) {
        var entity, human, id, zombie, _ref, _ref1, _results;
        WorldComponent.grid = {};
        _ref = this.entities.entitiesIndex['world'];
        for (id in _ref) {
          entity = _ref[id];
          entity.components.world.tick();
          human = entity.components.human;
          zombie = entity.components.zombie;
          if ((human && human.isDead) || (zombie && zombie.isDead)) {
            this.entities.remove(entity);
          }
        }
        _ref1 = this.entities.entitiesIndex['world'];
        _results = [];
        for (id in _ref1) {
          entity = _ref1[id];
          _results.push(entity.components.world.getNeighbors());
        }
        return _results;
      };

      return World;

    })();
    return World;
  });

}).call(this);
